<!DOCTYPE html>
<html lang="en">

<head>
    <title>Data viewer.</title>
</head>

<body>
    <h1>Data viewer.</h1>
    <div id="chartContainer"></div>
    <div id="container"></div>
</body>

<style>
    .row {
        display: flex;
        align-items: center;
    }
    .row + .row {
        margin-top: 10px;
    }
    .sampleContainer {
        background-color: #f7f5f1;
        text-align: center;
        border-radius: 10%;
        margin: 1px;
    }

    .rowLabel {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        width: 80px;
        margin-right: 10px;
    }

    .thumb {
        width: 72px;
        height: 72px;
    }

    .sampleContainer + .sampleContainer {
        margin-left: 12px;
    }
</style>

<script src="../common/draw.js"></script>
<script src="../common/utils.js"></script>
<script src="../common/js_objects/features.js"></script>
<script src="./js/display.js"></script>
<script src="../common/constants.js"></script>
<script src="https://www.gstatic.com/charts/loader.js"></script>
<script>
    const {samples, featureNames} = features;
    const groups = utils.groupBy(samples, "student_id");

    let count = 0;
    for (let student_id in groups) {
        const samples = groups[student_id];
        const studentName = samples[0].student_name;
        createRow(container, studentName, samples);
        count++;
        // due to memory limit in browser, have to render only first 100
        if (count == 100) {
            break;
        }
    }

    const gchartOptions = {
        width:400,
        height:400,
        hAxis: {title: featureNames[0]},
        vAxis: {title: featureNames[1]},
        legend: {position: 'none'},
    };

    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback( () => {
        const data = new google.visualization.DataTable();
        data.addColumn('number', featureNames[0]);
        data.addColumn('number', featureNames[1]);
        data.addRows(samples.map(sample => sample.point));
        const chart = new google.visualization.ScatterChart(chartContainer);
        chart.draw(data, gchartOptions);
    });
</script>

</html>